* CREATING A TABLE  *
CREATE TABLE  "CATEGORY_T" 
   (    "CA_ID" NUMBER NOT NULL ENABLE, 
    "CA_NAME" VARCHAR2(50), 
    "LAST_MODIFIED_ON" DATE, 
    "LAST_MODIFIED_BY" VARCHAR2(30), 
     CONSTRAINT "CATEGORY_PK" PRIMARY KEY ("CA_ID") ENABLE
   )
/

* CREATING SEQUENCE *
 CREATE SEQUENCE   "CATEGORY_SEQ"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 100 CACHE 20 NOORDER  NOCYCLE
/

* CREATING TRIGGER *
CREATE OR REPLACE TRIGGER  "INSERT_CATEGORY" 
BEFORE INSERT ON CATEGORY_T
FOR EACH ROW
DECLARE
  CA_id_sv number;
BEGIN
  IF INSERTING THEN
  
  :New.LAST_MODIFIED_ON:= SYSDATE;
  :New.LAST_MODIFIED_BY:= V('APP_USER');

  SELECT CATEGORY_SEQ.nextval
    INTO CA_id_sv
    FROM dual;
  :new.CA_ID := CA_id_sv;

  ELSIF UPDATING THEN

  :New.LAST_MODIFIED_ON:= SYSDATE;
  :New.LAST_MODIFIED_BY:= V('APP_USER');

END IF;
  
End;
/
